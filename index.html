<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Swarm by PorkShoulderHolder</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Swarm</h1>
      <h2 class="project-tagline">A simple class to handle drawing &quot;swarms&quot; ~ brownian motion / orbiting particles ~ on an HTML canvas element.</h2>
      <a href="https://github.com/PorkShoulderHolder/swarm" class="btn">View on GitHub</a>
      <a href="https://github.com/PorkShoulderHolder/swarm/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/PorkShoulderHolder/swarm/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="swarmjs" class="anchor" href="#swarmjs" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>swarm.js</h1>

<p>swarm.js is a tool for rendering swarm-like behaviour on an html canvas element. The system can be thought of as a set of particles subject to brownian motion
with added consideration for momentum as well as gravity about a certain point, or set of points. The agents (i.e. insects/gnats) comprising each swarm are not aware of each other,
but can be made aware of the cursor location. Their position should be manipulated by way of setting the gravitational center(s), this way they will maintain their
organic looking motion.</p>

<p>Examples: <a href="http://somatostat.in/swarmSandbox.html">http://somatostat.in/swarmSandbox.html</a></p>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>

<p>The constructor must take a canvas context as the argument. This will produce a swarm of 100 agents (insects, gnats, call them whatever you like), with default attributes.</p>

<pre><code>var canvas = document.getElementById('canvas');
var context = canvas.getContext('2d');

var swarm = new Swarm(context);
</code></pre>

<p>In order to render it, you need to set up an animation loop, this can be done with something like requestAnimationFrame(), setInterval(), or d3.timer(). This has been left exposed so that you can
synchronize your animation between multiple swarms or other drawing operations.</p>

<pre><code>var animate = function(){
    swarm.nextIteration(cursorX,cursorY);
    requestAnimationFrame(animate);
}

animate();
</code></pre>

<p>If you don't care about interacting with the cursor, just pass in a large number as if the cursor was very far away:</p>

<pre><code>var animate = function(){
    swarm.nextIteration(10000,10000);
    requestAnimationFrame(animate);
}

animate();
</code></pre>

<p>Try messing with the physical parameters (gravity, friction, randomness) of the swarm to see understand the effects; generally choose values that are positive and within [0,1].
All values are normalized with respect to the context's size. So setting</p>

<pre><code>swarm.centroids = [[0.5, 0.5]];
</code></pre>

<p>will cause the insects to be centered around the center of the screen.</p>

<p>Depending on how you set the parameters, these guys can start to look a lot like a swarm of gnats!</p>

<h2>
<a id="advanced-usage" class="anchor" href="#advanced-usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Advanced Usage</h2>

<p>The swarm is made of an array of 'insects', which are constructed like this</p>

<pre><code>var Insect = function(xloc,yloc,xvel,yvel,centroid){

    this.xloc = xloc;
    this.yloc = yloc;
    this.xvel = xvel;
    this.yvel = yvel;
    this.children = [];
    this.centroid = centroid;

}
</code></pre>

<p>These are made by default, if not specified in the Swarm constructor.</p>

<p>We can manually remove and add two insects at a time with:</p>

<pre><code>swarm.addMember();
swarm.sacrificeMember();
</code></pre>

<p>Also we can make every agent have a 'child' that will follow them around, and correspondingly get rid of them:</p>

<pre><code>swarm.spawnYouth();
swarm.purgeYouth();
</code></pre>

<p>The 'centroids' property is an array. If you populate that array, the swarm can do some cool stuff based on the locations of the centroids.</p>

<pre><code>swarm.centroids = [[0.3,0.3], [0.3,0.4], [0.3,0.5], [0.3,0.6],
                   [0.3,0.7], [0.4,0.7], [0.5,0.7], [0.6,0.7],
                   [0.7,0.7], [0.7,0.6], [0.7,0.5], [0.7,0.4],
                   [0.7,0.3], [0.6,0.3], [0.5,0.3], [0.4,0.3]]
</code></pre>

<p>Above the centroids are set to the outline of a 5 x 5 square.</p>

<pre><code>// spread the swarm evenly between the centroids

swarm.equalize();

//make each agent to continually calculate the nearest centroid and set that to be theirs:

swarm.currentMode = SWARM_DYNAMIC_CENTROIDS;
</code></pre>

<p>Now the agents will migrate between the centroids if they are close enough.
Dynamic centroid mode is computationally intensive, but it looks cool. A grid system is on the to-do list to help deal with this.</p>

<p>That's it!</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/PorkShoulderHolder/swarm">Swarm</a> is maintained by <a href="https://github.com/PorkShoulderHolder">PorkShoulderHolder</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
